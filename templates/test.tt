<!doctype html>

<html>

<head>
  <title>Test</title>
</head>

<body>

[% SET gidx = games.data.all %]

[%# ======================================================================
    ======================================================================
    ====================================================================== %]

<h1>Grand Trophy</h1>

<h2>Best Of 13</h2>

[% SET i = 0; WHILE i < 3 %]
  [% IF trophies.best13.item(i) %]
    [% plr = trophies.best13.item(i) %]
    [% i + 1 %].
    [% IF i == 0 %]<b>[% END %]
    [% plr %]
    [% players.data.item(plr).best13.cnt %]
    [% IF i == 0 %]</b>[% END %]
    <br>
  [% END %]
  [% SET i = i + 1 %]
[% END %]

[%# ======================================================================
    ======================================================================
    ====================================================================== %]

<h1>Major Trophies</h1>

[%# ---------------------------------------------------------------------- %]

<h2>Most Ascensions</h2>

[% SET i = 0; WHILE i < 3 %]
  [% IF players.meta.ord_by_ascs.item(i) %]
    [% i + 1 %].
    [% IF i == 0 %]<b>[% END %]
    [% SET plr = players.meta.ord_by_ascs.item(i); plr %]
    [% players.data.item(plr).cnt_ascensions %]
    [% IF i == 0 %]</b>[% END %]
    <br>
  [% END %]
  [% SET i = i + 1 %]
[% END %]

[%# ---------------------------------------------------------------------- %]

<h2>Fastest Ascension: Gametime</h2>

[% SET i = 0; WHILE i < 3 %]
  [% IF games.data.asc_by_turns.item(i).defined %]
    [% i + 1 %].
    [% IF i == 0 %]<b>[% END %]
    [% SET g = games.data.asc_by_turns.item(i) %]
    [% gidx.item(g).name %] [% gidx.item(g).turns %]
    [% IF i == 0 %]</b>[% END %]
    <br>
  [% END %]
  [% SET i = i + 1 %]
[% END %]

[%# ---------------------------------------------------------------------- %]

<h2>Fastest Ascension: Realtime</h2>

[% SET i =0; WHILE i < 3 %]
  [% IF games.data.asc_by_duration.item(i).defined %]
    [% i + 1 %].
    [% IF i == 0 %]<b>[% END %]
    [% SET g = games.data.asc_by_duration.item(i) %]
    [% gidx.item(g).name %] [% gidx.item(g).realtime %]
    [% IF i == 0 %]</b>[% END %]
    <br>
  [% END %]
  [% SET i = i + 1 %]
[% END %]

[%# ---------------------------------------------------------------------- %]

<h2>Lowest Scoring Ascension</h2>

[% SET i =0; WHILE i < 3 %]
  [% IF games.data.asc_by_minscore.item(i).defined %]
    [% i + 1 %].
    [% IF i == 0 %]<b>[% END %]
    [% SET g = games.data.asc_by_minscore.item(i) %]
    [% gidx.item(g).name %] [% gidx.item(g).points %]
    [% IF i == 0 %]</b>[% END %]
    <br>
  [% END %]
  [% SET i = i + 1 %]
[% END %]

[%# ---------------------------------------------------------------------- %]

<h2>Highest Scoring Ascension</h2>

[% SET i =0; WHILE i < 3 %]
  [% IF games.data.asc_by_maxscore.item(i).defined %]
    [% i + 1 %].
    [% IF i == 0 %]<b>[% END %]
    [% SET g = games.data.asc_by_maxscore.item(i) %]
    [% gidx.item(g).name %] [% gidx.item(g).points %]
    [% IF i == 0 %]</b>[% END %]
    <br>
  [% END %]
  [% SET i = i + 1 %]
[% END %]


[%# ---------------------------------------------------------------------- %]

<h2>First Ascension</h2>

[% SET i =0; WHILE i < 3 %]
  [% IF games.data.ascended.item(i).defined %]
    [% i + 1 %].
    [% IF i == 0 %]<b>[% END %]
    [% SET g = games.data.ascended.item(i) %]
    [% gidx.item(g).name %] [% gidx.item(g).deathdate %]
    [% IF i == 0 %]</b>[% END %]
    <br>
  [% END %]
  [% SET i = i + 1 %]
[% END %]

[%# ---------------------------------------------------------------------- %]

<h2>Best Behaved Ascension</h2>

[% SET i =0; WHILE i < 3 %]
  [% IF games.data.asc_by_conducts.item(i).defined %]
    [% i + 1 %].
    [% IF i == 0 %]<b>[% END %]
    [% SET g = games.data.asc_by_conducts.item(i) %]
    [% gidx.item(g).name %] [% gidx.item(g).item('_ncond') %] /
    [% gidx.item(g).item('_conds') %]
    [% IF i == 0 %]</b>[% END %]
    <br>
  [% END %]
  [% SET i = i + 1 %]
[% END %]

[%# ---------------------------------------------------------------------- %]

<h2>Most Unique Deaths</h2>

[% SET i =0; WHILE i < 3 %]
  [% IF trophies.unique.item(i) %]
    [% i + 1 %].
    [% IF i == 0 %]<b>[% END %]
    [% SET plr = trophies.unique.item(i) %]
    [% plr %] [% players.data.item(plr).unique.list.size %]
    [% IF i == 0 %]</b>[% END %]
    <br>
  [% END %]
  [% SET i = i + 1 %]
[% END %]


[%# ======================================================================
    ======================================================================
    ====================================================================== %]

<h1>Minor Trophies</h1>

<table>
  [% FOR role IN aux.roles %]
  [% SET f = games.data.top_by_role.item(role).size %]
  [% SET g = games.data.top_by_role.item(role).0 %]
  <tr>
    <td>[% role %]</td>
    <td>
      [% IF f; gidx.item(g).name; END %]
    </td>
    <td>
      [% IF f; gidx.item(g).points; END %]
    </td>
  </tr>
  [% END %]
</table>

[%# ======================================================================
    ======================================================================
    ====================================================================== %]

<h1>Recognition Trophies</h1>

<table>
  [% FOR trophy IN aux.trophies.recognition.ord.reverse %]
  [% IF trophies.recognition.item(trophy _ '_wbo') %]
  <tr>
    <td>[% aux.trophies.recognition.data.item(trophy) %] WBO</td>
    <td>[% trophies.recognition.item(trophy _ '_wbo').size %]</td>
    <td>[% trophies.recognition.item(trophy _ '_wbo').join(' ') %]</td>
  </tr>
  [% END %]
  <tr>
    <td>[% aux.trophies.recognition.data.item(trophy) %]</td>
    <td>[% trophies.recognition.item(trophy).size %]</td>
    <td>[% trophies.recognition.item(trophy).join(' ') %]</td>
  </tr>
  [% END %]
</table>

[%# ======================================================================
    ======================================================================
    ====================================================================== %]

<h1>Theme Trophies</h1>

<h2>Basic Extinct</h2>

[% SET i =0; WHILE i < 3 %]
  [% IF games.data.games_by_exts.item(i).defined %]
    [% i + 1 %].
    [% IF i == 0 %]<b>[% END %]
    [% SET g = games.data.games_by_exts.item(i) %]
    [% gidx.item(g).name %] [% gidx.item(g).extinctions %]
    [% IF i == 0 %]</b>[% END %]
    <br>
  [% END %]
  [% SET i = i + 1 %]
[% END %]

<h2>Who Wants To Be A Killionaire?</h2>

[% SET i =0; WHILE i < 3 %]
  [% IF games.data.games_by_kills.item(i).defined %]
    [% i + 1 %].
    [% IF i == 0 %]<b>[% END %]
    [% SET g = games.data.games_by_kills.item(i) %]
    [% gidx.item(g).name %] [% gidx.item(g).kills120 %]
    [% IF i == 0 %]</b>[% END %]
    <br>
  [% END %]
  [% SET i = i + 1 %]
[% END %]

</body>

</html>
